<template>
  <svg
    id="canvas"
    ref="canvas"
    version="1.1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="150 0 1720 1340"
  >
    <g id="main-elements">
      <g id="arrow" ref="arrow">
        <polygon
          ref="arrowShape"
          points="989.6,1071.5 998.1,1086.2 1006.6,1100.8 989.6,1100.8 972.7,1100.8 981.2,1086.2"
        />
        <circle id="arrow-path" cx="989.5" cy="556.2" r="529.9" />
      </g>
      <!-- arrow -->

      <g id="risk-options">
        <g class="risk low">
          <path
            class="bg"
            d="M591.5,718.9c-21.7-52.2-33.1-107.5-33.9-164.5h-56.8c0.8,64.8,13.7,127.7,38.4,187
          c24.6,59.2,59.8,112.3,104.7,158c11.8,12,24.2,23.4,37,34l34.7-45.8c-10.9-9.1-21.4-18.8-31.5-29.1
          C644.4,818.1,613.2,771.2,591.5,718.9z"
          />
          <g class="text">
            <path
              d="M558.3,685.5l0.9,2.8l-10.7,3.5l1.8,5.6l-2.5,0.8l-2.7-8.5L558.3,685.5z"
            />
            <path
              d="M564.7,704c1.4,4-0.4,7.9-4.3,9.4c-3.9,1.4-7.7-0.5-9.2-4.4c-1.4-4,0.4-7.9,4.3-9.3
            C559.4,698.2,563.3,700,564.7,704z M562.2,704.9c-0.9-2.4-3.2-3.3-5.7-2.4c-2.4,0.9-3.7,3.1-2.8,5.6c0.9,2.4,3.3,3.3,5.7,2.5
            C561.8,709.6,563.1,707.4,562.2,704.9z"
            />
            <path
              d="M567.4,724.2l-9.7,1.4l-1.2-2.9l11.3-9l1.2,3.1l-8.3,6.1l10.2-1.4l0.9,2.2l-8.2,6.3l10.1-1.6
            l1.3,3.1l-14.3,1.6l-1.2-2.9L567.4,724.2z"
            />
            <path
              d="M574.1,750.9l-0.9-2l-4.5,2.2l-1.3-2.7l12.4-6.1l2.8,5.9c1.2,2.6,0.3,5.1-2,6.2
            c-2.2,1.1-4,0.2-5-1l-3.4,5.2l-1.5-3.1L574.1,750.9z M580.2,749l-1.3-2.8l-3.4,1.7l1.3,2.8c0.5,1.1,1.6,1.6,2.6,1.1
            C580.4,751.2,580.7,750,580.2,749z"
            />
            <path d="M586.9,756.8l1.3,2.7l-12.3,6.4l-1.3-2.7L586.9,756.8z" />
            <path
              d="M582.5,769.5c-0.4,1.4-0.4,3.1,0.5,4.8c0.8,1.4,1.8,1.8,2.5,1.4c0.9-0.5,0.6-1.7,0.2-3.3
            c-0.6-2.3-1.5-5.2,1.2-6.7c2-1.1,4.6-0.3,6.2,2.6c1.1,2,1.3,3.9,0.9,5.7l-2.7-0.4c0.4-1.5,0.1-3.1-0.6-4.3c-0.6-1.2-1.5-1.5-2.2-1.1c-0.8,0.5-0.5,1.6-0.1,3.2c0.6,2.3,1.4,5.2-1.3,6.7c-2.2,1.2-4.7,0.6-6.5-2.8c-1.3-2.4-1.4-4.5-0.9-6.3L582.5,769.5z"
            />
            <path
              d="M592.8,785.3l-1.7-0.3l-3.6,2.2l-1.5-2.6l11.9-7.1l1.5,2.6l-5.3,3.2l7.8,1.1l1.8,3.2l-8.4-1.4
            L592,795l-1.8-3.2L592.8,785.3z"
            />
          </g>
        </g>
        <!-- low risk -->

        <g class="risk intermediate">
          <g class="bg">
            <path
              d="M1244,902.9c-26.7,19.9-55.6,36.5-86.4,49.8c-53.2,22.9-109.8,34.5-168.1,34.5c-58.3,0-114.9-11.6-168.1-34.5c-30.2-13-58.6-29.3-84.9-48.7l-34.7,45.8c30.2,22.4,62.8,41.2,97.5,56.1c60.3,25.9,124.3,39.1,190.2,39.1c66,0,130-13.1,190.2-39.1c35.3-15.2,68.5-34.4,99.1-57.3L1244,902.9z"
            />
          </g>
          <g class="text">
            <path d="M874.4,992.4l2.8,0.8l-3.5,13.6l-2.8-0.8L874.4,992.4z" />
            <path
              d="M884.2,999.6l-2.1,9.2l-2.9-0.7l3.1-13.7l2.9,0.7l4.2,10.3l2-8.9l2.9,0.7l-3.1,13.7l-2.8-0.6L884.2,999.6z"
            />
            <path
              d="M902.2,1001.6l-4-0.8l0.5-2.6l10.8,2.1l-0.5,2.6l-3.9-0.8l-2.1,11.2l-2.9-0.6L902.2,1001.6z"
            />
            <path
              d="M913.8,1001.1l9.6,1.6l-0.4,2.5l-6.7-1.1l-0.5,3l6.6,1.1l-0.4,2.5l-6.6-1.1l-0.5,3.2l6.7,1.1
            l-0.4,2.6l-9.6-1.6L913.8,1001.1z"
            />
            <path
              d="M932.2,1012.9l-2.1-0.3l-0.6,5l-2.9-0.4l1.7-13.9l6.4,0.8c2.9,0.4,4.4,2.5,4,5.1c-0.3,2.5-2,3.6-3.5,3.7l2.4,5.7l-3.3-0.4L932.2,1012.9z M933.9,1006.7l-3.1-0.4l-0.5,3.8l3.1,0.4c1.2,0.1,2.1-0.5,2.3-1.7C935.8,1007.7,935,1006.8,933.9,1006.7z"
            />
            <path
              d="M955.5,1010.3l-4.7,9.7l-1.3-0.1l-3-10.4l-0.9,10.1l-2.9-0.3l1.2-14l4.1,0.4l2.6,9l4.1-8.4
            l4.1,0.4l-1.2,14l-2.9-0.3L955.5,1010.3z"
            />
            <path
              d="M963.9,1006.9l9.8,0.5l-0.1,2.6l-6.8-0.3l-0.1,3l6.7,0.3l-0.1,2.6l-6.7-0.3l-0.2,3.3l6.8,0.3
            l-0.1,2.6l-9.8-0.5L963.9,1006.9z"
            />
            <path
              d="M978.4,1007.5l5.4,0.1c4.3,0.1,7.3,2.9,7.2,7.1c0,4.2-3.1,7-7.4,6.9l-5.4-0.1L978.4,1007.5z
            M983.7,1019c2.7,0,4.3-1.9,4.4-4.3c0-2.5-1.4-4.4-4.3-4.4l-2.5,0l-0.1,8.8L983.7,1019z"
            />
            <path d="M995.8,1007.6l2.9-0.1l0.2,14l-2.9,0.1L995.8,1007.6z" />
            <path
              d="M1013.4,1018.6l-6.2,0.3l-0.8,2.5l-3.2,0.1l4.7-14.3l3.7-0.2l5.9,13.8l-3.2,0.1L1013.4,1018.6zM1007.9,1016.3l4.6-0.2l-2.6-6.3L1007.9,1016.3z"
            />
            <path
              d="M1022.7,1009l-4,0.3l-0.2-2.6l11-0.9l0.2,2.6l-4,0.3l0.9,11.4l-2.9,0.2L1022.7,1009z"
            />
            <path
              d="M1033.9,1005.4l9.7-1.1l0.3,2.5l-6.8,0.8l0.3,3l6.6-0.7l0.3,2.5l-6.6,0.7l0.4,3.2l6.8-0.8
            l0.3,2.6l-9.7,1.1L1033.9,1005.4z"
            />
            <path
              d="M1062.6,1010.7l-2.1,0.3l0.8,5l-2.9,0.5l-2.2-13.8l6.4-1c2.8-0.5,4.9,1.1,5.3,3.7
            c0.4,2.5-0.9,4-2.3,4.6l3.9,4.8l-3.3,0.5L1062.6,1010.7z M1062.5,1004.2l-3,0.5l0.6,3.8l3-0.5c1.2-0.2,1.9-1.1,1.7-2.2
            C1064.7,1004.6,1063.7,1004,1062.5,1004.2z"
            />
            <path d="M1071.8,999.9l2.9-0.6l2.6,13.8l-2.9,0.6L1071.8,999.9z" />
            <path
              d="M1082.6,1007.7c1.2,0.8,2.8,1.3,4.7,0.9c1.6-0.3,2.2-1.3,2-2.1c-0.2-1-1.5-1.1-3.1-1.1
            c-2.3,0-5.3,0-5.9-3.1c-0.5-2.3,1.1-4.6,4.2-5.3c2.1-0.5,4.1-0.2,5.7,0.8l-1.1,2.5c-1.3-0.8-2.9-0.9-4.2-0.6c-1.3,0.3-1.9,1-1.7,1.8c0.2,0.9,1.4,1,3,1c2.3,0,5.3,0.1,6,3.1c0.5,2.5-0.8,4.8-4.5,5.6c-2.6,0.6-4.6,0.1-6.2-0.9L1082.6,1007.7z"
            />
            <path
              d="M1100.4,1002.2l-0.7,1.5l1,4.2l-2.8,0.7l-3.4-13.6l2.8-0.7l1.5,6.1l3.2-7.3l3.5-0.9l-3.7,7.7l7.5,5.8l-3.5,0.9L1100.4,1002.2z"
            />
          </g>
        </g>
        <!-- intermediate risk -->

        <g class="risk high">
          <path
            class="bg"
            d="M1421.4,554.3c-0.8,57-12.2,112.4-33.9,164.5c-21.8,52.3-52.9,99.3-92.6,139.6
          c-9.7,9.8-19.7,19.1-30.1,27.9l34.8,45.6c12.3-10.3,24.1-21.2,35.4-32.7c44.9-45.6,80.1-98.8,104.7-158
          c24.7-59.3,37.6-122.2,38.4-187H1421.4z"
          />
          <g class="text">
            <path
              d="M1385.5,800.2l-1.7,2.7l-5.4-3.5l-3.2,5l5.4,3.5l-1.7,2.7l-12.4-8.1l1.7-2.7l4.9,3.2l3.2-5
            l-4.9-3.2l1.7-2.7L1385.5,800.2z"
            />
            <path d="M1388.8,794.8l-12.6-7.8l1.6-2.7l12.6,7.8L1388.8,794.8z" />
            <path
              d="M1389.1,777.5l2.9-5.2l6.7,3.8c-0.2,1-0.5,1.9-0.8,2.7c-0.3,0.8-0.7,1.6-1.1,2.4c-1.1,2-2.5,3.1-4.2,3.5c-1.7,0.4-3.6,0-5.8-1.3c-2.1-1.2-3.4-2.7-3.8-4.6c-0.5-1.9-0.1-3.9,1.1-6c0.7-1.3,1.7-2.5,3-3.4l1.7,2.2c-1,0.7-1.8,1.5-2.4,2.6c-0.7,1.2-0.8,2.4-0.4,3.6c0.4,1.2,1.3,2.1,2.6,2.9c1.4,0.8,2.6,1.1,3.7,1c1.1-0.2,1.9-0.8,2.5-1.9c0.3-0.6,0.6-1.2,0.8-1.9l-2.7-1.5l-1.4,2.5L1389.1,777.5z"
            />
            <path
              d="M1407.6,760.3l-1.4,2.8l-5.7-3l-2.7,5.3l5.7,3l-1.4,2.8l-13.1-6.9l1.4-2.8l5.1,2.7l2.7-5.3l-5.1-2.7l1.4-2.8L1407.6,760.3z"
            />
            <path
              d="M1409.9,742l5.2,2.4l-1.3,2.9l-13.5-6.2l1.8-4c0.8-1.9,1.8-3.1,2.8-3.7c1.1-0.6,2.3-0.6,3.6,0.1c0.8,0.4,1.4,0.9,1.8,1.6c0.4,0.7,0.6,1.6,0.6,2.5c3.9-0.7,6.5-1.1,7.6-1.3l-1.4,3.2l-6.6,0.9L1409.9,742z M1407.6,740.9l0.4-0.9c0.4-0.9,0.6-1.7,0.4-2.2c-0.1-0.6-0.5-1-1.1-1.3c-0.6-0.3-1.2-0.3-1.7,0c-0.5,0.3-0.9,1-1.3,1.9l-0.4,0.9L1407.6,740.9z"
            />
            <path d="M1420.3,732.2l-13.6-5.8l1.2-2.9l13.6,5.8L1420.3,732.2z" />
            <path
              d="M1423.2,713.6c1.2,0.5,2,1.3,2.4,2.5c0.4,1.2,0.2,2.6-0.4,4.2c-0.6,1.5-1.4,2.7-2.3,3.6l-2.7-1.1c0.8-0.8,1.4-1.5,1.8-2.1c0.4-0.6,0.7-1.2,0.9-1.7c0.2-0.7,0.3-1.2,0.2-1.6c-0.1-0.4-0.4-0.8-0.9-1c-0.3-0.1-0.5-0.1-0.8-0.1c-0.3,0.1-0.6,0.2-0.9,0.4c-0.3,0.2-0.8,0.7-1.6,1.4c-0.7,0.7-1.3,1.2-1.9,1.5c-0.5,0.3-1.1,0.5-1.7,0.5c-0.6,0.1-1.2,0-1.8-0.3c-1.2-0.5-2-1.3-2.4-2.4c-0.4-1.1-0.3-2.4,0.3-3.9c0.3-0.7,0.6-1.4,1.1-2c0.4-0.6,0.9-1.2,1.5-1.8l1.9,1.9c-0.6,0.6-1,1.2-1.3,1.6c-0.3,0.4-0.5,0.9-0.7,1.4c-0.2,0.6-0.3,1-0.1,1.4c0.1,0.4,0.4,0.7,0.8,0.8c0.3,0.1,0.5,0.1,0.7,0.1c0.2,0,0.5-0.2,0.8-0.4c0.3-0.2,0.8-0.7,1.7-1.5c1.1-1.1,2.1-1.7,2.9-2S1422.3,713.3,1423.2,713.6z"
            />
            <path
              d="M1432.8,698.8l-1.2,3.4l-7.2,1.6l0.5,1.6l5,1.8l-1,3l-13.9-5l1-3l6.4,2.3l-1.2-1.8l-3.4-5.5l1.2-3.3l4.5,7.1L1432.8,698.8z"
            />
          </g>
        </g>
        <!-- high risk -->
      </g>
      <!-- risk-options -->

      <ellipse id="inner" cx="989.5" cy="556.4" rx="350" ry="346.9" />
      <g id="outer" ref="outer">
        <path
          id="outer-ring"
          d="M674.7,289.1
        c75.8-89.1,188.7-145.6,314.8-145.6c228.1,0,413,184.8,413,412.9s-184.9,412.9-413,412.9s-413-184.8-413-412.9
        c0-85.8,26.2-165.5,71-231.5c0,0,0,0,0,0"
        />
        <circle id="halo" cx="660.5" cy="306.5" r="22.5" />
      </g>

      <g id="markers">
        <circle class="dot functional" cx="660.5" cy="306.5" r="8" />
        <circle class="dot six-minute" cx="989.5" cy="143.5" r="8" />
        <circle class="dot nt-pro" cx="1318.2" cy="306.5" r="8" />
      </g>
      <!-- markers -->
    </g>
    <!-- main elements -->

    <g id="guys">
      <g class="guy" data-show-info="six-minute">
        <path
          id="leg"
          d="M941.4,586.5l35.3,34.4l-38.7,67.2l-3,4L882,764.5c-7.9,10.5-22.9,12.6-33.5,4.7
        c-6.2-4.7-9.5-11.8-9.5-19.1c0-5,1.6-10.1,4.8-14.4l52.1-70.1c0.3-0.5,0.6-1.1,0.9-1.6L941.4,586.5z"
        />
        <path
          id="body"
          d="M1094,775c-2.6,0.9-5.3,1.4-7.9,1.4c-9.8,0-19.1-6.1-22.5-15.9l-33.7-95.4l-46.2-44.2
        l-0.1-0.1l-39.9-38.9l0-113.5l-45.4,26.3l-6.4,72.8c-1.2,10.7-10.8,18.4-21.5,17.2c-10-1.1-17.3-9.6-17.3-19.4
        c0-0.7,0-1.5,0.1-2.2l7.7-81.9c0-0.1,0-0.1,0-0.2l0-0.5c0.6-6,4-11.7,9.6-15c0,0,77.4-46.9,77.4-46.9c1.6-1.1,3.6-1.6,5.7-1.4
        h21.7c19.6,0,35.6,16,35.6,35.6l0,38.5l69.7,59.7c8.4,7.2,9.3,19.7,2.2,28.1c-3.9,4.6-9.5,7-15.1,7c-4.6,0-9.2-1.6-12.9-4.8
        l-43.8-36l0,29.8l57,60.5c0.9,0.9,1.8,2,2.4,3c0.9,1.4,1.3,3,1.8,4.6c0.3,0.7,36.3,101.2,36.3,101.2
        C1113,756.9,1106.5,770.6,1094,775z"
        />
        <circle id="head" cx="982.3" cy="362.4" r="43.1" />
      </g>
      <g class="guy" data-show-info="nt-pro">
        <g>
          <path
            d="M897,618.3c0,20.5-13.8,37.9-32.5,43.3v81.1c0,6.9-5.6,12.5-12.5,12.5s-12.5-5.6-12.5-12.5v-81.1
          c-18.8-5.4-32.5-22.8-32.5-43.3c0-20.5,13.8-37.9,32.5-43.3V371.1c0-6.9,5.6-12.5,12.5-12.5s12.5,5.6,12.5,12.5V575
          C883.3,580.4,897,597.8,897,618.3z"
          />
        </g>
        <g>
          <path
            d="M1034.1,493.4c0,20.5-13.8,37.9-32.6,43.3v206c0,6.9-5.6,12.5-12.5,12.5s-12.5-5.6-12.5-12.5v-206
          c-18.8-5.4-32.5-22.8-32.5-43.3c0-20.5,13.8-37.9,32.5-43.3v-78.9c0-6.9,5.6-12.5,12.5-12.5s12.5,5.6,12.5,12.5v78.9
          C1020.3,455.5,1034.1,472.8,1034.1,493.4z"
          />
        </g>
        <g>
          <path
            style="fill:#DADADB;"
            d="M1171.1,618.3c0,20.5-13.8,37.9-32.6,43.3v81.1c0,6.9-5.6,12.5-12.5,12.5s-12.5-5.6-12.5-12.5
          v-81.1c-18.8-5.4-32.6-22.8-32.6-43.3c0-20.5,13.8-37.9,32.6-43.3V371.1c0-6.9,5.6-12.5,12.5-12.5s12.5,5.6,12.5,12.5V575
          C1157.3,580.4,1171.1,597.8,1171.1,618.3z"
          />
        </g>
      </g>
      <g class="guy" data-show-info="functional">
        <g>
          <path
            d="M1068.4,415.4v-19.6h-41.6c-1.5-19.5-17.9-34.9-37.8-34.9s-36.3,15.4-37.8,34.9h-40.6v19.6h-67.3
          v337.7h292.3V415.4H1068.4z M930.6,415.8H975l-3.3-12.5c-0.4-1.5-0.6-3-0.6-4.5c0-9.9,8-17.9,17.9-17.9s17.9,8,17.9,17.9
          c0,1.5-0.2,3-0.6,4.5l-3.3,12.5h45.3v23.8H930.6V415.8z M1115.7,733.1H863.3V435.4h47.3v24.3h157.7v-24.3h47.3V733.1z"
          />
        </g>
        <rect x="920.6" y="525.5" width="137.7" height="23" />
        <rect x="920.6" y="587.5" width="137.7" height="23" />
        <rect x="920.6" y="649.5" width="137.7" height="23" />
      </g>
    </g>
    <!-- guys -->

    <g id="titles">
      <text
        class="node functional"
        transform="matrix(1 0 0 1 356.1137 316.335)"
      >
        <tspan>
          FUNCTIONAL
        </tspan>
        <tspan x="118.9" y="44">
          CLASS
        </tspan>
      </text>
      <!-- functional title -->

      <text
        class="node six-minute"
        transform="matrix(1 0 0 1 779.7563 51.4722)"
      >
        <tspan>
          SIX-MINUTE WALK TEST
        </tspan>
        <tspan x="142.8" y="43">
          (6MWT)
        </tspan>
      </text>
      <!-- six-minute walk title -->

      <text
        class="node nt-pro bottom"
        transform="matrix(1 0 0 1 1393.1593 394.5493)"
      >
        <tspan x="0" y="0">
          (used to help detect, diagnose, and
        </tspan>
        <tspan x="0" y="26">
          evaluate the severity of heart failure)
        </tspan>
      </text>
      <text
        class="node nt-pro top"
        transform="matrix(1 0 0 1 1392.8868 316.035)"
      >
        <tspan x="0" y="0">
          NT-pro BNP/BNP
        </tspan>
        <tspan x="0" y="45">
          PLASMA LEVELS
        </tspan>
      </text>
      <!-- nt-pro title -->
    </g>
    <!-- titles -->

    <g id="descriptions">
      <text
        class="functional"
        data-show-info="functional"
        data-name="functional"
        transform="matrix(1 0 0 1 816.0275 312.6332)"
      >
        <tspan x="0" y="0">Functional Class (FC) is one way</tspan>
        <tspan x="5.6" y="32">to describe the severity of PAH</tspan>

        <tspan x="-55.5" y="85">
          It describes how limited or “restricted” you
        </tspan>
        <tspan x="32.4" y="117">are in day-to-day activities</tspan>

        <tspan x="-38.3" y="181">
          It can range from I-IV with FC I the least
        </tspan>
        <tspan x="30.2" y="213">severe and FC IV the most</tspan>

        <tspan x="-56.2" y="277">
          Because functional class may change over
        </tspan>
        <tspan x="-43.9" y="309">
          time, it’s important to monitor it regularly
        </tspan>
      </text>
      <!-- functional description -->

      <text
        class="six-minute"
        data-show-info="six-minute"
        data-name="six-minute"
        transform="matrix(1 0 0 1 792.0405 381.8544)"
      >
        <tspan x="0" y="0">One of the most common tests to</tspan>
        <tspan x="0.5" y="32">determine your ability to exercise</tspan>
        <tspan x="-38.9" y="96">Measures how far you can walk on a flat</tspan>
        <tspan x="77.2" y="128">surface in 6 minutes</tspan>
        <tspan x="-26.4" y="192">An important test for people with PAH</tspan>
      </text>
      <!-- six-minute description -->

      <text
        class="nt-pro"
        data-show-info="nt-pro"
        data-name="nt-pro"
        transform="matrix(1 0 0 1 828.825 313.1411)"
      >
        <tspan x="0" y="0">Helps detect, diagnose and</tspan>
        <tspan x="-48.5" y="32">evaluate the severity of heart failure</tspan>
        <tspan x="-109.7" y="96">
          Measures the amount of BNP hormone in your
        </tspan>
        <tspan x="-126.8" y="128">
          blood. BNP is produced when your heart is under
        </tspan>
        <tspan x="-116.5" y="160">
          stress. If your heart works harder than normal, it
        </tspan>
        <tspan x="-50.7" y="192">releases more BNP and NT-pro BNP</tspan>
        <tspan x="-84.2" y="256">
          Provides information about how hard your
        </tspan>
        <tspan x="-61.2" y="288">heart is working and how your body is</tspan>
        <tspan x="19.3" y="320">responding to treatment</tspan>
      </text>
      <!-- nt-pro description -->
    </g>
    <!-- descriptions -->

    <g id="ranges">
      <g class="low" data-show-risk="low">
        <text
          class="functional"
          data-show-info="functional"
          transform="matrix(1 0 0 1 851.8932 714.2774)"
        >
          <tspan x="0" y="0">Class I – No symptoms</tspan>
          <tspan x="1" y="32">with ordinary activities</tspan>
          <tspan x="-67.5" y="64">Class II – Symptoms with ordinary</tspan>
          <tspan x="-72.7" y="96">
            activity. Slight limitation of activity.
          </tspan>
        </text>
        <!-- low functional range -->

        <text
          class="six-minute"
          data-show-info="six-minute"
          transform="matrix(1 0 0 1 935.165 717.4399)"
        >
          &gt;440 m
        </text>
        <!-- low six-minute range -->

        <text
          class="nt-pro"
          data-show-info="nt-pro"
          transform="matrix(1 0 0 1 905.5849 714.277)"
        >
          <tspan x="0" y="0">BNP &lt;50 ng/L</tspan>
          <tspan x="-53.3" y="32">NT-pro BNP &lt;300 ng/L</tspan>
        </text>
        <!-- low nt-pro range -->
      </g>
      <!-- low range -->

      <g class="intermediate" data-show-risk="intermediate">
        <text
          class="functional"
          data-show-info="functional"
          transform="matrix(1 0 0 1 774.0976 714.755)"
        >
          <tspan x="0" y="0">Class III – Symptoms with less than</tspan>
          <tspan x="2.8" y="32.4">ordinary activity. Marked limitation</tspan>
          <tspan x="152" y="64.8">of activity.</tspan>
        </text>
        <!-- intermediate functional range -->

        <text
          class="six-minute"
          data-show-info="six-minute"
          transform="matrix(1 0 0 1 924.1896 714.1993)"
        >
          165-440 m
        </text>
        <!-- intermediate six-minute range -->

        <text
          class="nt-pro"
          data-show-info="nt-pro"
          transform="matrix(1 0 0 1 882.8593 713.9996)"
        >
          <tspan x="0" y="0">BNP 50-300 ng/L</tspan>
          <tspan x="-59.5" y="32.4">NT-pro BNP 300-1400 ng/L</tspan>
        </text>
        <!-- intermediate nt-pro range -->
      </g>
      <!-- intermediate range -->

      <g class="high" data-show-risk="high">
        <text
          class="functional"
          data-show-info="functional"
          transform="matrix(1 0 0 1 830.883 715.2393)"
        >
          <tspan x="0" y="0">Class IV - Symptoms with</tspan>
          <tspan x="9.6" y="32">any activity or even rest</tspan>
        </text>
        <!-- high functional range -->

        <text
          class="six-minute"
          data-show-info="six-minute"
          transform="matrix(1 0 0 1 946.1794 714.2769)"
        >
          &lt;165 m
        </text>
        <!-- high six-minute range -->

        <text
          class="nt-pro"
          data-show-info="nt-pro"
          transform="matrix(1 0 0 1 897.5663 714.2769)"
        >
          <tspan x="0" y="0">BNP &gt;300 ng/L</tspan>
          <tspan x="-50.9" y="32">NT-pro BNP &gt;1400 ng/L</tspan>
          <tspan x="-19.7" y="64">natriuretic peptide</tspan>
        </text>
        <!-- high nt-pro range -->
      </g>
      <!-- high range -->
    </g>
    <!-- ranges -->

    <g id="key">
      <text
        id="six-minute-key"
        data-show-info="six-minute"
        transform="matrix(1 0 0 1 689.0364 1146.474)"
      >
        m = meters. 1 meter is a bit more than 3 feet (3.2 ft.)
      </text>
      <text
        id="nt-pro-key"
        data-show-info="nt-pro"
        transform="matrix(1 0 0 1 520.292 1146.474)"
      >
        BNP = Brain Natriuretic Peptides ; NT-pro BNP = N-terminal pro b-type
        natriuretic peptide
      </text>
    </g>
    <!-- key -->

    <g id="static-text">
      <text transform="matrix(1 0 0 1 334.0938 1248.3782)">
        <tspan x="0" y="0">
          This tool is not intended to provide medical advice nor should it be
          used to diagnose PAH or determine your risk
        </tspan>
        <tspan x="-12.4" y="34">
          score. If you are experiencing symptoms due to your PAH, you may be at
          intermediate- or high-risk. We encourage
        </tspan>
        <tspan x="41.7" y="68">
          you to use this information to talk with your doctor about your risk
          status and discuss your treatment plan.
        </tspan>
      </text>
      <!-- warning -->

      <text id="results-range" transform="matrix(1 0 0 1 903.0603 672.2774)">
        Results Range
      </text>
      <!-- results range -->
    </g>
    <!-- static text -->
  </svg>
</template>

<script>
import { Machine, interpret } from "xstate";
import { TweenMax, Draggable } from "gsap/all";
import ThrowPropsPlugin from "../vendor/gsap/ThrowPropsPlugin";

export default {
  data() {
    return {
      riskMachine: Machine({
        id: "risky",
        type: "parallel",
        states: {
          risk: {
            initial: "low",
            states: {
              low: {},
              intermediate: {},
              high: {}
            },
            on: {
              SELECT_LOW: ".low",
              SELECT_INTERMEDIATE: ".intermediate",
              SELECT_HIGH: ".high"
            }
          },
          info: {
            initial: "functional",
            states: {
              functional: {},
              "six-minute": {},
              "nt-pro": {}
            },
            on: {
              SELECT_FUNCTIONAL: ".functional",
              SELECT_SIX_WALK: ".six-minute",
              SELECT_NT_PRO: ".nt-pro"
            }
          }
        }
      }),
      service: null,
      canvas: null,
      arrowPath: null,
      outerPath: null,
      halo: null,
      arrow: null,
      nodes: null
    }; // return
  },
  mounted() {
    // machine set up
    this.service = interpret(this.riskMachine).onTransition(this.activate);

    this.activate(this.riskMachine.initialState);
    this.service.start();

    // gsap set up
    this.canvas = this.$refs.canvas;
    this.arrowPath = this.$refs.arrow;
    this.arrow = this.$refs.arrowShape;
    this.outerPath = this.$refs.outer;

    TweenMax.set(this.arrowPath, { transformOrigin: "center center" });
    TweenMax.set(this.outerPath, { transformOrigin: "center center" });
    TweenMax.set(this.canvas, { visibility: "visible" });
    TweenMax.to(this.arrowPath, 0.5, { rotation: 65 });

    Draggable.create(this.arrowPath, {
      type: "rotation",
      bounds: { minRotation: -65, maxRotation: 65 },
      trigger: arrow,
      overshootTolerance: 0.05,
      maxDuration: 0.5,
      throwProps: true,
      snap: [-65, 0, 65],
      onThrowComplete: () => this.setRiskOnDrag()
    });

    Draggable.create(this.outerPath, {
      type: "rotation",
      bounds: { minRotation: 0, maxRotation: 105.5 },
      trigger: halo,
      overshootTolerance: 0.05,
      maxDuration: 0.5,
      throwProps: true,
      snap: [0, 52.75, 105.5],
      onThrowComplete: () => this.setInfoOnDrag()
    });

    // event listeners
    document.querySelectorAll("#titles text").forEach(node => {
      node.addEventListener("click", () => {
        this.setInfo(node.classList[1]);
      });
    });

    document.querySelectorAll(".risk").forEach(risk => {
      risk.addEventListener("click", () => {
        this.setRiskOnSelect(risk.classList[1]);
      });
    });
  },
  destroyed() {
    this.service.stop();
  },
  methods: {
    activate(state) {
      document.querySelector("#canvas").dataset.risk = state.value.risk;
      document.querySelector("#canvas").dataset.info = state.value.info;

      // When the overall state matches a [data-show="..."] state, the element should have the data-active attribute.
      document.querySelectorAll("#canvas [data-active]").forEach(el => {
        el.removeAttribute("data-active");
      });

      document
        .querySelectorAll(`#canvas [data-show-risk~="${state.value.risk}"]`)
        .forEach(el => {
          el.setAttribute("data-active", true);
        });

      document
        .querySelectorAll(`#canvas [data-show-info~="${state.value.info}"]`)
        .forEach(el => {
          el.setAttribute("data-active", true);
        });
    }, // activate
    setRiskOnDrag() {
      switch (this.arrowPath._gsTransform.rotation) {
        case -65:
          this.service.send("SELECT_HIGH");
          break;
        case 0:
          this.service.send("SELECT_INTERMEDIATE");
          break;
        case 65:
          this.service.send("SELECT_LOW");
          break;
        default:
          console.log("oh no");
      }
    }, // setRiskOnDrag
    setRiskOnSelect(risk) {
      switch (risk) {
        case "low":
          TweenMax.to(this.arrowPath, 0.5, { rotation: 65 });
          this.service.send("SELECT_LOW");
          break;
        case "intermediate":
          TweenMax.to(this.arrowPath, 0.5, { rotation: 0 });
          this.service.send("SELECT_INTERMEDIATE");
          break;
        case "high":
          TweenMax.to(this.arrowPath, 0.5, { rotation: -65 });
          this.service.send("SELECT_HIGH");
          break;
        default:
          console.log("oh no!");
      }
    }, // setRiskOnSelect
    setInfoOnDrag() {
      switch (this.outerPath._gsTransform.rotation) {
        case 0:
          this.service.send("SELECT_FUNCTIONAL");
          break;
        case 52.75:
          this.service.send("SELECT_SIX_WALK");
          break;
        case 105.5:
          this.service.send("SELECT_NT_PRO");
          break;
        default:
          console.log("oh no");
      }
    }, // setInfoOnDrag
    setInfo(section) {
      switch (section) {
        case "functional":
          TweenMax.to(this.outerPath, 0.5, { rotation: 0 });
          this.service.send("SELECT_FUNCTIONAL");
          break;
        case "six-minute":
          TweenMax.to(this.outerPath, 0.5, { rotation: 52.75 });
          this.service.send("SELECT_SIX_WALK");
          break;
        case "nt-pro":
          TweenMax.to(this.outerPath, 0.5, { rotation: 105.5 });
          this.service.send("SELECT_NT_PRO");
          break;
        default:
          console.log("oh no!");
      }
    }
  }
};
</script>

<style lang="scss" scoped>
#canvas {
  --color-low: #21a84a;
  --color-intermediate: #f99d1c;
  --color-high: #ed1f24;

  width: 100%;
  max-width: 1024px;
  margin: auto;
  visibility: hidden;
}

[data-show-info],
[data-show-risk] {
  opacity: 0;

  &[data-active] {
    opacity: 1;
  }
}

/* TRANSITIONS
=========================================== */

#guys .guy,
#descriptions text,
#ranges g,
#ranges text,
#key text {
  transition: opacity 300ms ease-in-out;
}

#main-elements #outer,
#titles .node {
  transition: fill 300ms ease-in-out;
}

#main-elements #outer #halo,
#main-elements #outer #outer-ring {
  transition: stroke 300ms ease-in-out;
}

/* ELEMENTS
=========================================== */

#main-elements #inner {
  fill: #e7e7e9;
  stroke: #8f9194;
  stroke-width: 3px;
}

#main-elements #outer {
  fill: none;
  stroke-width: 3px;
  stroke: #8f9194;
  transition: fill 300ms ease-in-out;
}

#main-elements #outer #halo {
  fill: transparent;
  stroke-width: 3px;
  cursor: pointer;
}

#main-elements #markers .dot {
  fill: #8f9194;
  pointer-events: none;
  transition: fill 300ms ease-in-out;
}

/* ARROW
=========================================== */

#arrow circle {
  visibility: hidden;
}

#arrow polygon {
  fill: #8f9194;
  transition: fill 300ms ease-in-out;
  cursor: pointer;
}

/* RISK OPTIONS
=========================================== */

#risk-options .risk {
  cursor: pointer;
}

#risk-options .risk .bg {
  fill: #e7e7e9;
  transition: fill 300ms ease-in-out;
}

#risk-options .risk .text {
  font-size: 20px;
  font-family: ProximaNovaBold, "Arial Narrow Bold", sans-serif;
  fill: #5c5c5e;
  user-select: none;
  transition: fill 300ms ease-in-out;
}

/* GUYS
=========================================== */

#guys .guy {
  fill: #d7d7d7;
}

/* INFO TITLES
=========================================== */

#titles text {
  cursor: pointer;
  font-size: 38px;
  fill: #8f9194;
  font-family: ProximaNovaBold, "Arial Narrow Bold", sans-serif;
}

#titles .nt-pro.bottom {
  font-size: 21px;
}

/* RANGES
=========================================== */

#ranges text {
  font-size: 27px;
  font-family: ProximaNovaBold, "Arial Narrow Bold", sans-serif;
}

#ranges .low {
  fill: var(--color-low);
}

#ranges .intermediate {
  fill: var(--color-intermediate);
}

#ranges .high {
  fill: var(--color-high);
}

#descriptions {
  font-size: 27px;
}

/* KEY
=========================================== */

#key {
  font-size: 26px;
}

/* STATIC TEXT
=========================================== */

#static-text text {
  font-size: 27px;
  font-family: ProximaNovaBold, "Arial Narrow Bold", sans-serif;
}

/* RISK STATES
=========================================== */

[data-risk~="low"] {
  --bg: var(--color-low);
  --color: #fff;
  #main-elements #outer {
    stroke: var(--bg);
  }

  #arrow polygon {
    fill: var(--bg);
  }

  #risk-options .risk.low .bg {
    fill: var(--bg);
  }

  #risk-options .risk.low .text {
    fill: var(--color);
  }
}

[data-risk~="intermediate"] {
  --bg: var(--color-intermediate);
  --color: #fff;
  #main-elements #outer {
    stroke: var(--bg);
  }

  #arrow polygon {
    fill: var(--bg);
  }

  #risk-options .risk.intermediate .bg {
    fill: var(--bg);
  }

  #risk-options .risk.intermediate .text {
    fill: var(--color);
  }
}

[data-risk~="high"] {
  --bg: var(--color-high);
  --color: #fff;
  #main-elements #outer {
    stroke: var(--bg);
  }

  #arrow polygon {
    fill: var(--bg);
  }

  #risk-options .risk.high .bg {
    fill: var(--bg);
  }

  #risk-options .risk.high .text {
    fill: var(--color);
  }
}

/* INFO STATES
=========================================== */

[data-info~="functional"] {
  #titles .functional {
    fill: var(--bg);
  }

  #main-elements #markers .dot.functional {
    fill: var(--bg);
  }
}

[data-info~="six-minute"] {
  #titles .six-minute {
    fill: var(--bg);
  }

  #main-elements #markers .dot.six-minute {
    fill: var(--bg);
  }
}

[data-info~="nt-pro"] {
  #titles .nt-pro {
    fill: var(--bg);
  }

  #main-elements #markers .dot.nt-pro {
    fill: var(--bg);
  }
}
</style>